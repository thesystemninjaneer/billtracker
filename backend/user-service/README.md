# User Service Microservice

Node.js Express application for the User Service.

1. project setup


express: Web framework.

mysql2: MySQL client for Node.js.

dotenv: For loading environment variables.

cors: For handling Cross-Origin Resource Sharing.

bcryptjs: For hashing passwords securely.

jsonwebtoken: For creating and verifying JWTs.

2. config file `.env`

Important: Replace your_jwt_secret_key_very_long_and_random with a truly random and complex string (e.g., generated by node -e "console.log(require('crypto').randomBytes(32).toString('hex'))").

3. User Service Code

main application file: `backend/user-service/server.js`.

4. containerized user service

The Dockerfile in backend/user-service conatineries the service.

5. Integrated User Service 

The Dockerfile is included in the `./my-bil-tracker/docker-compose.yaml` file.

## Running the backend service

```
docker compose up --build -d
```

This command will:

    Build the user-service Docker image.

    Recreate organization-service if its Dockerfile changed (though it shouldn't have).

    Ensure all services are running and healthy.

check logs
```
docker compose logs -f user-service
```
You should see User Service: Connected to MySQL database! and User Service running on port 3000.

### Testing 

curl to test your User Service APIs.
The base URL for your User Service will be http://localhost:3000.

    Register User (POST):

        URL: http://localhost:3000/register

        Method: POST

        Headers: Content-Type: application/json

        Body (raw JSON):
        JSON

    {
        "username": "testuser",
        "email": "test@example.com",
        "password": "password123"
    }

    Expected Response: A 201 Created status with userId and a token.

Login User (POST):

    URL: http://localhost:3000/login

    Method: POST

    Headers: Content-Type: application/json

    Body (raw JSON):
    JSON

        {
            "username": "testuser",
            "password": "password123"
        }

        Expected Response: A 200 OK status with a token and user object. Copy this token!

    Get User Profile (GET - Protected Route):

        URL: http://localhost:3000/profile

        Method: GET

        Headers:

            Content-Type: application/json

            Authorization: Bearer YOUR_JWT_TOKEN_HERE (Replace YOUR_JWT_TOKEN_HERE with the token obtained from the login response).

        Expected Response: A 200 OK status with user profile details.

        Test without token: If you omit the Authorization header or provide an invalid token, you should get a 401 Unauthorized or 403 Forbidden response.


this functional User Service uses secure password hashing and JWT-based authentication!

The next logical step is to integrate this User Service into the React frontend to allow users to register and log in. After that, we'll update the Organization Service to use the actual user_id from the authenticated user.